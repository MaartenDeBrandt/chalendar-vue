webpackJsonp([1],{"7zck":function(e,t){},"H/py":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),r=n("Dd8w"),o=n.n(r),s=n("NYxO"),i=n("ytdl"),u=n.n(i),c=(n("mtWM"),n("6hKT")),d=n("/ocq"),l=(n("cHfL"),n("Zx67")),v=n.n(l),p=n("Zrlr"),f=n.n(p),h=n("wxAW"),m=n.n(h),g=n("zwoO"),_=n.n(g),b=n("Pf15"),k=n.n(b),C=(n("mtWM"),function(){function e(){f()(this,e),this.baseUri="https://challendar.herokuapp.com/api/"}return m()(e,null,[{key:"buildHeaders",value:function(){return{headers:{Authorization:"Bearer "+$()}}}}]),e}()),E=n("mtWM"),M=function(e){function t(){f()(this,t);var e=_()(this,(t.__proto__||v()(t)).call(this));return e.baseUri+="Chatters",e}return k()(t,e),m()(t,[{key:"chatterExists",value:function(e){return E.get(this.baseUri+"/"+e+"/exists",C.buildHeaders()).then(function(e){return e.data})}},{key:"getChatter",value:function(e){return E.get(this.baseUri+"/"+e,C.buildHeaders()).then(function(e){return e.data})}},{key:"postChatter",value:function(e){var t=e.sub,n=e.email,a=e.given_name,r=e.family_name,o=e.picture;return E({method:"post",url:""+this.baseUri,headers:{authorization:"Bearer "+$()},data:{id:t,email:n,firstName:a,lastName:r,picture:o}})}},{key:"putChatter",value:function(e){var t=e.sub,n=e.email,a=e.given_name,r=e.family_name,o=e.picture;return E({method:"put",url:""+this.baseUri,headers:{authorization:"Bearer "+$()},data:{id:t,email:n,firstName:a,lastName:r,picture:o}})}}]),t}(C),y="id_token",x="access_token",S="http://localhost:8080/callback",U="openid profile email",w="https://chalendar.com/",G=new M,I=new c.default.WebAuth({clientID:"26K0G3dpKG3JVSMgDUCM2c4OUoxsDZY1",domain:"chalendar.eu.auth0.com"});new d.a({mode:"history"});function L(){localStorage.removeItem(y),localStorage.removeItem(x),window.location.href="/"}function $(){return localStorage.getItem(x)}function A(e){var t=RegExp("[#&]"+e+"=([^&]*)").exec(window.location.hash);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}function H(e){I.client.userInfo($(),function(t,n){e.$store.commit("userStore/setUserInfo",n),G.putChatter(n).catch(function(e){console.error(e.response?e.response:e)})})}function O(){var e,t=localStorage.getItem(y);return!(!t||(e=t,function(e){var t=u()(e);if(!t.exp)return null;var n=new Date(0);return n.setUTCSeconds(t.exp),n}(e)<new Date))}var N={name:"Group",data:function(){return{inputMessage:""}},created:function(){this.loadGroup(this.$route.params.id)},methods:o()({sendMessage:function(){this.postMessage(this.inputMessage).then(this.inputMessage="")}},Object(s.b)("groupStore",["loadGroup","postMessage"])),computed:Object(s.c)({loadedGroup:function(e){return e.groupStore.loadedGroup}})},j={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("h1",[e._v(e._s(e.loadedGroup.name))]),e._v(" "),n("v-list",[n("v-divider"),e._v(" "),e._l(e.loadedGroup.messages,function(t){return[n("v-list-tile",{key:t.id,on:{click:function(e){}}},[n("v-list-tile-avatar",[n("img",{attrs:{src:t.creatorPicture}})]),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.text))]),e._v(" "),n("v-list-tile-sub-title",[e._v("By "+e._s(t.creatorName))])],1)],1),e._v(" "),n("v-divider")]})],2),e._v(" "),n("v-form",{staticClass:"pt-3"},[n("v-layout",{attrs:{column:""}},[n("v-layout",[n("v-textarea",{attrs:{rows:"1","single-line":"",box:"",label:"Enter your message ...",name:"inputMessage"},model:{value:e.inputMessage,callback:function(t){e.inputMessage=t},expression:"inputMessage"}}),e._v(" "),n("v-btn",{on:{click:function(t){e.sendMessage()}}},[e._v("Send")])],1)],1)],1)],1)},staticRenderFns:[]};var z=n("VU/8")(N,j,!1,function(e){n("VmP+")},"data-v-40de2760",null).exports,V={name:"App",components:{Group:z},data:function(){return{drawer:null}},mounted:function(){O()&&(H(this),this.initGroups(),this.initCalendars())},methods:o()({handleLogin:function(){I.authorize({responseType:"token id_token",redirectUri:S,audience:w,scope:U}),O()&&(H(this),this.initGroups(),this.initCalendars())},handleLogout:function(){L()},shouldLogin:function(){return!O()},toGroup:function(e){return"/group/"+e},toCalendar:function(e){return"/calendar/"+e}},Object(s.b)("groupStore",["initGroups"]),Object(s.b)("calendarStore",["initCalendars"])),computed:Object(s.c)({userInfo:function(e){return e.userStore.userInfo},groups:function(e){return e.groupStore.groups},calendars:function(e){return e.calendarStore.calendars}})},F={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("v-navigation-drawer",{attrs:{clipped:e.$vuetify.breakpoint.mdAndUp,app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-divider"),e._v(" "),e.shouldLogin()?e._e():n("v-list",{staticClass:"pt-0",attrs:{dense:""}},e._l(e.groups,function(t){return n("v-list-tile",{key:t.id,attrs:{to:e.toGroup(t.id)},on:{click:function(e){}}},[n("v-list-tile-action",[n("v-icon",[e._v("group")])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.name))])],1)],1)})),e._v(" "),e.shouldLogin()?e._e():n("v-list",{staticClass:"pt-0",attrs:{dense:""}},e._l(e.calendars,function(t){return n("v-list-tile",{key:t.id,attrs:{to:e.toCalendar(t.id)},on:{click:function(e){}}},[n("v-list-tile-action",[n("v-icon",[e._v("calendar_today")])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.name))])],1)],1)}))],1),e._v(" "),n("v-toolbar",{attrs:{app:"","clipped-left":e.$vuetify.breakpoint.mdAndUp,fixed:""}},[n("v-toolbar-title",[n("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),n("span",[e._v("Chalendar")])],1),e._v(" "),e.shouldLogin()?n("v-toolbar-title",[n("v-btn",{on:{click:function(t){e.handleLogin()}}},[e._v("Login")])],1):e._e(),e._v(" "),n("v-spacer"),e._v(" "),e.userInfo?n("v-toolbar-title",[n("v-avatar",{attrs:{tile:!1,size:"56px",color:"grey lighten-4"}},[n("img",{attrs:{src:e.userInfo.picture,alt:"avatar"}})])],1):e._e(),e._v(" "),e.shouldLogin()?e._e():n("v-btn",{on:{click:function(t){e.handleLogout()}}},[e._v("Logout")])],1),e._v(" "),n("v-content",[n("router-view")],1),e._v(" "),n("v-footer",{attrs:{fixed:"",app:""}},[n("span",[e._v("Â© 2018 - Roel Van Zeebroeck")])])],1)},staticRenderFns:[]},P=n("VU/8")(V,F,!1,null,null,null).exports,D={name:"Main",components:{Group:z},methods:o()({},Object(s.b)("auth",["isLoggedIn"]))},R={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var W=n("VU/8")(D,R,!1,function(e){n("H/py")},"data-v-42b8d734",null).exports,B={name:"Calendar",created:function(){this.loadCalendar(this.$route.params.id)},methods:o()({toAddEvent:function(){return"/calendar/"+this.$route.params.id+"/event/add"},toEvent:function(e){return"/calendar/"+this.$route.params.id+"/event/"+e}},Object(s.b)("calendarStore",["loadCalendar"])),computed:Object(s.c)({loadedCalendar:function(e){return e.calendarStore.loadedCalendar}})},T={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("h1",[e._v(e._s(e.loadedCalendar.name))]),e._v(" "),n("v-btn",{attrs:{to:e.toAddEvent()}},[e._v("Add event")]),e._v(" "),n("v-list",[n("v-divider"),e._v(" "),e._l(e.loadedCalendar.events,function(t){return[n("v-list-tile",{key:t.id,attrs:{to:e.toEvent(t.id)}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(new Date(t.date).toDateString())+": "+e._s(t.name))])],1)],1),e._v(" "),n("v-divider")]})],2),e._v(" "),n("v-btn",{attrs:{to:e.toAddEvent()}},[e._v("Add event")])],1)},staticRenderFns:[]};var X=n("VU/8")(B,T,!1,function(e){n("NPXp")},"data-v-7c9eeda7",null).exports,Z={name:"Event",data:function(){return{inputMessage:""}},created:function(){this.loadEvent(this.$route.params.id)},methods:o()({sendMessage:function(){this.postMessage(this.inputMessage).then(this.inputMessage="")}},Object(s.b)("calendarStore",["loadEvent","postMessage"])),computed:Object(s.c)({loadedEvent:function(e){return e.calendarStore.loadedEvent}})},K={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("h1",[e._v(e._s(new Date(e.loadedEvent.date).toLocaleDateString())+": "+e._s(e.loadedEvent.name))]),e._v(" "),n("v-list",[n("v-divider"),e._v(" "),e._l(e.loadedEvent.messages,function(t){return[n("v-list-tile",{key:t.id,on:{click:function(e){}}},[n("v-list-tile-avatar",[n("img",{attrs:{src:t.creatorPicture}})]),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.text))]),e._v(" "),n("v-list-tile-sub-title",[e._v("By "+e._s(t.creatorName))])],1)],1),e._v(" "),n("v-divider")]})],2),e._v(" "),n("v-form",{staticClass:"pt-3"},[n("v-layout",{attrs:{column:""}},[n("v-layout",[n("v-textarea",{attrs:{rows:"1","single-line":"",box:"",label:"Enter your message ...",name:"inputMessage"},model:{value:e.inputMessage,callback:function(t){e.inputMessage=t},expression:"inputMessage"}}),e._v(" "),n("v-btn",{on:{click:function(t){e.sendMessage()}}},[e._v("Send")])],1)],1)],1)],1)},staticRenderFns:[]};var J=n("VU/8")(Z,K,!1,function(e){n("o4I8")},"data-v-562a0fbb",null).exports,Y={name:"AddEvent",data:function(){return{name:"",description:"",date:""}},methods:o()({addEvent:function(){var e=this;this.postEvent([this.name,this.description,this.date]).then(function(){return e.$router.push({path:e.toCalendar()})})},toCalendar:function(){return"/calendar/"+this.loadedCalendar.id}},Object(s.b)("calendarStore",["postEvent"])),computed:Object(s.c)({loadedCalendar:function(e){return e.calendarStore.loadedCalendar}})},q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:"","grid-list-xl":""}},[n("v-form",[n("v-text-field",{attrs:{label:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),n("v-textarea",{attrs:{label:"description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),e._v(" "),n("v-date-picker",{attrs:{label:"date"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),n("v-btn",{on:{click:function(t){e.addEvent()}}},[e._v("Save")]),e._v(" "),n("v-btn",{attrs:{to:e.toCalendar()}},[e._v("Cancel")])],1)],1)},staticRenderFns:[]};var Q=n("VU/8")(Y,q,!1,function(e){n("dFzX")},"data-v-531e4889",null).exports,ee={name:"",mounted:function(){var e=this;this.$nextTick(function(){var t,n;t=A("access_token"),localStorage.setItem(x,t),n=A("id_token"),localStorage.setItem(y,n),H(e)}),window.location.href="/"}},te={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},ne=n("VU/8")(ee,te,!1,null,null,null).exports;a.default.use(d.a);var ae=new d.a({mode:"history",routes:[{path:"/",name:"Main",component:W},{path:"/callback",name:"Callback",component:ne},{path:"/group/:id",name:"Group",component:z},{path:"/calendar/:id",name:"Calendar",component:X},{path:"/calendar/:calendarId/event/add",name:"AddEvent",component:Q},{path:"/calendar/:calendarId/event/:id",name:"Event",component:J}]}),re=n("//Fk"),oe=n.n(re),se=n("mtWM"),ie=new(function(e){function t(){f()(this,t);var e=_()(this,(t.__proto__||v()(t)).call(this));return e.baseUri+="Groups",e}return k()(t,e),m()(t,[{key:"getGroups",value:function(){return se.get(this.baseUri,C.buildHeaders()).then(function(e){return e.data})}},{key:"getGroup",value:function(e){return se.get(this.baseUri+"/"+e,C.buildHeaders()).then(function(e){return e.data})}},{key:"getMessages",value:function(e){return se.get(this.baseUri+"/"+e+"/messages",C.buildHeaders()).then(function(e){return e.data})}},{key:"postMessage",value:function(e,t){return se({method:"post",url:this.baseUri+"/"+e+"/messages",headers:{authorization:"Bearer "+$()},data:{text:t}}).then(function(e){return e.data})}}]),t}(C)),ue=new M;function ce(e){return ue.getChatter(e.creatorId).then(function(t){e.creatorName=t.firstName,e.creatorPicture=t.picture})}var de={namespaced:!0,state:{groups:[],loadedGroup:{messages:[]}},getters:{},actions:{initGroups:function(e){var t=e.commit;ie.getGroups().then(function(e){t("setGroups",e)}).catch(function(e){console.error(e.response?e.response:e)})},loadGroup:function(e,t){var n=e.commit,a={},r=[];ie.getGroup(t).then(function(e){return a=e,ie.getMessages(e.id)}).then(function(e){for(var t=0;t<e.length;t++){var n=e[t];r.push(ce(n))}a.messages=e}).then(function(e){oe.a.all(r).then(function(){n("setLoadedGroup",a)})}).catch(function(e){console.error(e.response?e.response:e)})},postMessage:function(e,t){var n=e.commit,a=e.state;e.rootState;a.loadedGroup?ie.postMessage(a.loadedGroup.id,t).then(function(e){ce(e).then(function(){return n("addMessage",e)})}).catch(function(e){console.error(e.response?e.response:e)}):console.error("Could not post message: no group loaded")}},mutations:{setGroups:function(e,t){e.groups=t},setLoadedGroup:function(e,t){e.loadedGroup=t},addMessage:function(e,t){e.loadedGroup.messages.push(t)},reset:function(e){e.groups=[],e.loadedGroup={messages:[]}}}},le=n("d7EF"),ve=n.n(le),pe=n("mtWM"),fe=function(e){function t(){f()(this,t);var e=_()(this,(t.__proto__||v()(t)).call(this));return e.baseUri+="Calendars",e}return k()(t,e),m()(t,[{key:"getCalendars",value:function(){return pe.get(this.baseUri,C.buildHeaders()).then(function(e){return e.data})}},{key:"getCalendar",value:function(e){return pe.get(this.baseUri+"/"+e,C.buildHeaders()).then(function(e){return e.data})}},{key:"getEvents",value:function(e){return pe.get(this.baseUri+"/"+e+'/events?filter={"order": "date"}',C.buildHeaders()).then(function(e){return e.data})}},{key:"postEvent",value:function(e,t){var n=ve()(t,3),a=n[0],r=n[1],o=n[2];return pe({method:"post",url:this.baseUri+"/"+e+"/events",headers:{authorization:"Bearer "+$()},data:{name:a,description:r,date:o}})}}]),t}(C),he=n("mtWM"),me=function(e){function t(){f()(this,t);var e=_()(this,(t.__proto__||v()(t)).call(this));return e.baseUri+="Events",e}return k()(t,e),m()(t,[{key:"getEvent",value:function(e){return he.get(this.baseUri+"/"+e,C.buildHeaders()).then(function(e){return e.data})}},{key:"getMessages",value:function(e){return he.get(this.baseUri+"/"+e+"/messages",C.buildHeaders()).then(function(e){return e.data})}},{key:"postMessage",value:function(e,t){return he({method:"post",url:this.baseUri+"/"+e+"/messages",headers:{authorization:"Bearer "+$()},data:{text:t}}).then(function(e){return e.data})}}]),t}(C),ge=new fe,_e=new me,be=new M;function ke(e){return be.getChatter(e.creatorId).then(function(t){e.creatorName=t.firstName,e.creatorPicture=t.picture})}var Ce={namespaced:!0,state:{calendars:[],loadedCalendar:{events:[]},loadedEvent:{messages:[]}},getters:{},actions:{initCalendars:function(e){var t=e.commit;ge.getCalendars().then(function(e){t("setCalendars",e)}).catch(function(e){console.error(e.response?e.response:e)})},loadCalendar:function(e,t){var n=e.commit,a={},r=[];ge.getCalendar(t).then(function(e){return a=e,ge.getEvents(e.id)}).then(function(e){a.events=e}).then(function(e){oe.a.all(r).then(function(){n("setLoadedCalendar",a)})}).catch(function(e){console.error(e.response?e.response:e)})},loadEvent:function(e,t){var n=e.commit,a={},r=[];_e.getEvent(t).then(function(e){return a=e,_e.getMessages(e.id)}).then(function(e){for(var t=0;t<e.length;t++){var n=e[t];r.push(ke(n))}a.messages=e}).then(function(e){oe.a.all(r).then(function(){n("setLoadedEvent",a)})}).catch(function(e){console.error(e.response?e.response:e)})},postEvent:function(e,t){var n=e.commit,a=e.state,r=(e.rootState,ve()(t,3)),o=r[0],s=r[1],i=r[2];a.loadedCalendar?ge.postEvent(a.loadedCalendar.id,[o,s,i]).then(function(e){n("addEvent",e)}).catch(function(e){console.error(e.response?e.response:e)}):console.error("Could not post event: no calendar loaded")},postMessage:function(e,t){var n=e.commit,a=e.state;e.rootState;a.loadedEvent?_e.postMessage(a.loadedEvent.id,t).then(function(e){ke(e).then(function(){return n("addMessage",e)})}).catch(function(e){console.error(e.response?e.response:e)}):console.error("Could not post message: no event loaded")}},mutations:{setCalendars:function(e,t){e.calendars=t},setLoadedCalendar:function(e,t){e.loadedCalendar=t},setLoadedEvent:function(e,t){e.loadedEvent=t},addEvent:function(e,t){e.loadedCalendar.events.push(t)},addMessage:function(e,t){e.loadedEvent.messages.push(t)},reset:function(e){e.calendars=[],e.loadedCalendar={events:[]},e.loadedEvent={messages:[]}}}},Ee={namespaced:!0,state:{userInfo:void 0},mutations:{setUserInfo:function(e,t){e.userInfo=t},reset:function(e){e.userInfo=void 0}}};a.default.use(s.a);var Me=new s.a.Store({modules:{groupStore:de,calendarStore:Ce,userStore:Ee},strict:!1,actions:{clearAll:function(e){var t=e.commit;t("groupStore/reset"),t("calendarStore/reset"),t("userStore/reset")}}}),ye=n("3EgV"),xe=n.n(ye);n("7zck");a.default.use(xe.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:ae,store:Me,components:{App:P},template:"<App/>"})},NPXp:function(e,t){},"VmP+":function(e,t){},dFzX:function(e,t){},o4I8:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2d3d4d60d26c00a38c9f.js.map